<link href="/stylesheets/index.css" rel="stylesheet">
<link href="/stylesheets/artwork.css" rel="stylesheet">




<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="sortMenu" data-bs-toggle="dropdown" aria-expanded="false">
    Sort by
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
    <li><a id="titleAZ" class="dropdown-item" onclick="addUrlParameter('sort', 'art_title')">Title A-Z</a></li>
    <li><a class="dropdown-item" onclick="addUrlParameter('sort', 'art_creator')">Creator A-Z</a></li>
    <li><a class="dropdown-item" onclick="deleteSort()">Relevance</a></li>
  </ul>
</div>
            {{#each artwork}}

            <!--- replace img with embed or iframe and change css (deals with all file types) || add conditional to do either img or video player --->
            <div class="container artwork col-3">
                    <img src="{{art_source}}" class="img-fluid w-100 shadow-1-strong rounded mb-4">
                        <a href="/artwork/{{page_number}}?id={{art_id}}">
                        <div class="overlay">
                            <div class="text">{{art_title}}</div>
                        </div>
                        </a>
            </div>
            {{/each}}
    <nav aria-label="Page navigation example">
        <div class="row">
            <ul class="pagination row-md-3">
                {{!-- {{#if previous}}
                    <li class="page-item"><a class="page-link" href="pagination{{previous}}">Previous</a></li>
                {{/if}}
                    <li class="page-item"><a class="page-link" href="{{page_number}}">{{page_number}}</a></li>
                {{#if next}}
                    <li class="page-item"><a class="page-link" href="{{next}}">Next</a></li>
                {{/if}} --}}
                {{#if previous}}
                    <li class="page-item"><a id="previous" class="page-link" onclick="pagination({{previous}})">Previous</a></li>
                {{/if}}

                    <li class="page-item"><a id="current" class="page-link" onclick="pagination({{page_number}});">{{page_number}}</a></li>
                
                {{#if next}}
                    <li class="page-item"><a id="next" class="page-link" onclick="pagination({{next}})">Next</a></li>
                {{/if}}
            </ul>
        </div>
    </nav>
   <div class="container col-10 text-center" >
            <hr>
            <div class="row" style="background-color = #c2e8f793;">
                <p1 class="text-center">Submit your own artwork!</p1>
            </div>
            <div class="buffer-zone">
                <a href="https://forms.gle/HiSJLGoSN4VsTdLr8" class="btn btn-outline-dark" target="_blank">Submit</a>
            </div>
            <hr>
    </div>
<script>
    function addUrlParameter(name, value) {
        let searchParams = new URLSearchParams(window.location.search);
        searchParams.set(name, value);
        window.location.search = searchParams.toString();
    }

    function deleteSort(){
        let searchParams = new URLSearchParams(window.location.search);
        searchParams.delete('sort');
        window.location.search = searchParams.toString();
    }

    function pagination(page_number){
        let location = window.location.href;
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        console.log(params);

        let search_string = "";

        for (parameter in params) {
            if (params.hasOwnProperty(parameter)) {
                if(!search_string === ""){search_string += "&"}
                search_string += parameter + "=" + params[parameter];
            }

        
        }    

        console.log("/artwork/" + page_number + "?" + search_string);
        window.location.href = "/artwork/" + page_number + "?" + search_string;
    }



</script>
